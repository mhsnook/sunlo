# Sprint Doc

Today's branch: `dev/9th-jan`. Completed items:

- [x] (c3, d3) When you try to add a phrase but you don't have a deck for that language, a checkbox gives you the option to start learning (or re-activate) that deck, or to create the new phrase without one.
- [x] (c2, d2) Deck-configurable preferred translation lang
- [x] (c1, d1) Fix Typescript Errors in Bulk-Add.tsx

## Instructions for the Coding Agent

1. Please start by picking one item from the list below with `STATUS: PENDING` or `STATUS: READY` that looks simple and does not require any explanation or interaction with other issues. If the item contains an ISSUE or PR number, use the `gh` cli to read the information from github. All items will be found in `https://github.com/mhsnook/sunlo/...`, which is also the remote `origin`.
2. Attempt to resolve the issue or complete the feature, writing tests and using the formatter and linter to validate your work.
3. Try the item up to 3x before giving up; mark the item `STATUS: BLOCKED` and leave a comment.
4. Each item lists a "COMPLEXITY" score from 1 to 4. This should tell you how much effort we think you should be putting in to each try.
5. If you need to ask questions to the human engineering manager, simply add them to the document along with the item below, and skip the item, marking it `STATUS: QUESTIONS`.
6. When you have finished an item, or reached the retry limit, or determined that you require more clarification from the human manager, write a note in the document along with the item below, so that you can forget our discussions later but retain this log. Update the DIFFICULTY score from 1 to 4 based on your experience so far working on the item. Make sure the STATUS is updated appropriately.
7. If you have completed the task, perform a git commit with a concise summary of the work.
8. Go back to step 1 as long as there are more PENDING items.

## Items to Work On

CHANGES TO INTEGRATE INTO OUR UNDERSTANDING OF THE APP:

- Modified the `add_phrase_translation_card` RPC function to accept an optional `create_card` boolean parameter (defaults to true for backward compatibility)
- Added deck status detection to both add-phrase and bulk-add pages using `useDeckMeta(lang)`
- Implemented conditional checkbox UI: "Start learning X" for new decks, "Re-activate X deck" for archived decks
- Checkbox only shows when user has no deck or an archived deck for the language
- When checkbox is checked, the mutation creates/reactivates the deck before adding the phrase
- Updated toast messages to indicate both phrase creation and deck actions
- Fixed a pre-existing test issue where the test expected "Select language" but the form now defaults to user's first known language

### Analysis D: React Compiler

STATUS: PENDING
COMPLEXITY: 3

DESCRIPTION FROM HUMAN MANAGER:
Please analyse the code to determine whether we might benefit from, or be harmed by, the adoption of the react compiler, as it is now stable and promising to simplify code while maintaining or even improving client performance. If necessary, please create a new github branch and install the compiler and try it out. But do not commit anything on the current working branch, `dev/9th-jan`. The primary output

### Feature E: Friends feed should become polymorphic like the recent feed

STATUS: PENDING

### Fix F: sometimes the feed's "load more" adds items _higher up_ in the list (should only add below)

STATUS: PENDING

HUMAN MANAGER COMMENT: This seems to happen because of how phrase folding items get sorted in the list. I think we should make sure to use the EARLIEST created-at date for all the items in the folded set to prevent this from happening.
